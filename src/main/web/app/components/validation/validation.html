<div id="warning"></div>
<div class="row">
    <h3 class="page-header">Validate and Load Data</h3>

    <div class="col-xs-12">
        <uib-tabset active="vm.activeTab">
            <uib-tab index="-1" heading="" disable="true" classes="col-xs-offset-1 hidden-tab"></uib-tab>

            <!-- Validation Tab -->
            <uib-tab index="0" heading="Validate">
                <form role="form" name="validateForm" class="form-horizontal"
                      ng-submit="vm.fimsMetadata && vm.validate()">


                    <fims-data ng-model="vm.fimsMetadata" change="vm.fimsMetadataChange()"></fims-data>
                    <div class="form-group">
                        <div class="col-xs-1 col-xs-offset-9">
                            <button type="submit" class="btn btn-default pull-right">Validate</button>
                        </div>
                    </div>
                </form>
            </uib-tab>

            <!-- Upload Tab -->
            <uib-tab index="1" heading="Upload" disable="!vm.isAuthenticated">

                <form role="form" name="vm.uploadForm" class="form-horizontal" novalidate ng-submit="vm.upload()">

                    <fims-data ng-model="vm.fimsMetadata"
                               is-required="true"
                               change="vm.fimsMetadataChange()"></fims-data>

                    <hr class="separator"/>

                    <div class="form-group" show-errors>
                        <label for="expeditionCode" class="col-xs-3 control-label">ARMS Project</label>
                        <div class="col-xs-7">
                            <div class="row">
                                <div class="col-xs-9">
                                    <select id="expeditionCode" name="expeditionCode"
                                            ng-model="vm.expeditionCode"
                                            ng-options="armsProject.expedition.expeditionCode as armsProject.expedition.expeditionTitle for armsProject in vm.expeditions | orderBy: 'expedition.expeditionTitle'"
                                            required
                                            class="form-control">
                                        <option value="">-- Select an Project--</option>
                                    </select>
                                </div>
                                <div class="col-xs-3">
                                    <button type="button" class="btn btn-default pull-right" ng-click="vm.createExpedition()">New
                                        Project
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="form-group">
                        <div class="col-xs-1 col-xs-offset-9">
                            <button type="submit" class="btn btn-primary pull-right">Upload</button>
                        </div>
                    </div>

                </form>
            </uib-tab>

            <!-- Results Tab -->
            <uib-tab index="2" heading="Results" disable="!vm.displayResults">
                <div class="col-xs-11 col-xs-offset-1"
                     ng-include="'app/components/validation/results/results.tpl.html'">
                </div>
            </uib-tab>
        </uib-tabset>


        <div id='map'></div>
    </div>
</div>
